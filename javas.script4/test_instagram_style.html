<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç Instagram/Telegram —Å—Ç–∏–ª—é —á–∞—Ç—É</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .test-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
        }
        .success { border-color: #28a745; background-color: #d4edda; }
        .error { border-color: #dc3545; background-color: #f8d7da; }
        .info { border-color: #17a2b8; background-color: #d1ecf1; }
        .feature { border-color: #ffc107; background-color: #fff3cd; }
        
        button {
            padding: 12px 20px;
            margin: 8px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .btn-primary { background-color: #667eea; color: white; }
        .btn-success { background-color: #28a745; color: white; }
        .btn-danger { background-color: #dc3545; color: white; }
        .btn-warning { background-color: #ffc107; color: black; }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .feature-list li:before {
            content: "‚úÖ ";
            margin-right: 10px;
        }
        
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ –¢–µ—Å—Ç Instagram/Telegram —Å—Ç–∏–ª—é —á–∞—Ç—É</h1>
        
        <div class="test-section info">
            <h3>üéØ –ù–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:</h3>
            <ul class="feature-list">
                <li>–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è –º—ñ–∂ –≥—Ä—É–ø–æ–≤–∏–º —Ç–∞ –ø—Ä–∏–≤–∞—Ç–Ω–∏–º —á–∞—Ç–æ–º</li>
                <li>–ö–ª—ñ–∫–∞–±–µ–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</li>
                <li>–í–∏–±—ñ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è</li>
                <li>–ü–æ–∫—Ä–∞—â–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó</li>
                <li>–°—Ç–∏–ª—å —è–∫ –≤ Instagram/Telegram</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>1. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</h3>
            <button class="btn-primary" onclick="createTestUsers()">–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</button>
            <button class="btn-success" onclick="checkUsers()">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</button>
            <div id="usersStatus" class="status"></div>
        </div>

        <div class="test-section">
            <h3>2. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–∞—Ç—É</h3>
            <button class="btn-primary" onclick="openChat()">–í—ñ–¥–∫—Ä–∏—Ç–∏ —á–∞—Ç</button>
            <button class="btn-warning" onclick="openTestChat()">–í—ñ–¥–∫—Ä–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤–∏–π —á–∞—Ç</button>
            <div id="chatStatus" class="status"></div>
        </div>

        <div class="test-section">
            <h3>3. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å</h3>
            <button class="btn-primary" onclick="testPrivateChat()">–¢–µ—Å—Ç –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å</button>
            <button class="btn-success" onclick="checkPrivateMessages()">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</button>
            <div id="privateStatus" class="status"></div>
        </div>

        <div class="test-section">
            <h3>4. –û—á–∏—â–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö</h3>
            <button class="btn-danger" onclick="clearAllData()">–û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ –¥–∞–Ω—ñ</button>
            <button class="btn-warning" onclick="resetChat()">–°–∫–∏–Ω—É—Ç–∏ —á–∞—Ç</button>
            <div id="clearStatus" class="status"></div>
        </div>

        <div class="test-section feature">
            <h3>üì± –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:</h3>
            <ol>
                <li><strong>–°—Ç–≤–æ—Ä—ñ—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:</strong> –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤"</li>
                <li><strong>–í—ñ–¥–∫—Ä–∏–π—Ç–µ —á–∞—Ç:</strong> –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–í—ñ–¥–∫—Ä–∏—Ç–∏ —á–∞—Ç"</li>
                <li><strong>–ì—Ä—É–ø–æ–≤–∏–π —á–∞—Ç:</strong> –í–∏–±–µ—Ä—ñ—Ç—å "–ì—Ä—É–ø–∞" –¥–ª—è —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ —É—Å—ñ–º–∞</li>
                <li><strong>–ü—Ä–∏–≤–∞—Ç–Ω–∏–π —á–∞—Ç:</strong> –í–∏–±–µ—Ä—ñ—Ç—å "–ü—Ä–∏–≤–∞—Ç–Ω–æ" —ñ –∫–ª—ñ–∫–Ω—ñ—Ç—å –Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</li>
                <li><strong>–í—ñ–¥–ø—Ä–∞–≤—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:</strong> –í–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç —ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å Enter</li>
            </ol>
        </div>
    </div>

    <script>
        function createTestUsers() {
            const testUsers = [
                { username: '–ê–Ω–Ω–∞', id: 'user-1' },
                { username: '–ë–æ–≥–¥–∞–Ω', id: 'user-2' },
                { username: '–ú–∞—Ä—ñ—è', id: 'user-3' },
                { username: '–û–ª–µ–∫—Å–∞–Ω–¥—Ä', id: 'user-4' },
                { username: '–Æ–ª—ñ—è', id: 'user-5' }
            ];

            const users = testUsers.map(user => ({
                ...user,
                isOnline: true,
                lastSeen: new Date().toISOString(),
                createdAt: new Date().toISOString()
            }));

            localStorage.setItem('chatUsers', JSON.stringify(users));
            
            // Set current user
            const currentUser = {
                id: 'current-user',
                username: '–¢–µ—Å—Ç–æ–≤–∏–π–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á'
            };
            localStorage.setItem('currentUser', JSON.stringify(currentUser));

            document.getElementById('usersStatus').innerHTML = 
                '<div class="success">‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ ' + users.length + ' —Ç–µ—Å—Ç–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</div>';
        }

        function checkUsers() {
            const users = JSON.parse(localStorage.getItem('chatUsers')) || [];
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            let status = '<div class="info">';
            status += '<strong>–ü–æ—Ç–æ—á–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á:</strong> ' + (currentUser ? currentUser.username : '–ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ') + '<br>';
            status += '<strong>–í—Å—å–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:</strong> ' + users.length + '<br>';
            status += '<strong>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:</strong><br>';
            users.forEach(user => {
                status += '‚Ä¢ ' + user.username + ' (' + (user.isOnline ? '–æ–Ω–ª–∞–π–Ω' : '–æ—Ñ–ª–∞–π–Ω') + ')<br>';
            });
            status += '</div>';
            
            document.getElementById('usersStatus').innerHTML = status;
        }

        function openChat() {
            window.open('chat.html', '_blank');
            document.getElementById('chatStatus').innerHTML = 
                '<div class="success">‚úÖ –ß–∞—Ç –≤—ñ–¥–∫—Ä–∏—Ç–æ –≤ –Ω–æ–≤—ñ–π –≤–∫–ª–∞–¥—Ü—ñ</div>';
        }

        function openTestChat() {
            window.open('test_chat.html', '_blank');
            document.getElementById('chatStatus').innerHTML = 
                '<div class="success">‚úÖ –¢–µ—Å—Ç–æ–≤–∏–π —á–∞—Ç –≤—ñ–¥–∫—Ä–∏—Ç–æ</div>';
        }

        function testPrivateChat() {
            // Create some private messages
            const chatId1 = 'current-user_user-1';
            const chatId2 = 'current-user_user-2';
            
            const privateMessages1 = [
                {
                    id: Date.now().toString(),
                    text: '–ü—Ä–∏–≤—ñ—Ç! –Ø–∫ —Å–ø—Ä–∞–≤–∏?',
                    userId: 'user-1',
                    username: '–ê–Ω–Ω–∞',
                    timestamp: new Date().toISOString(),
                    type: 'private',
                    chatId: chatId1
                },
                {
                    id: (Date.now() + 1).toString(),
                    text: '–ü—Ä–∏–≤—ñ—Ç! –í—Å–µ –¥–æ–±—Ä–µ, –¥—è–∫—É—é!',
                    userId: 'current-user',
                    username: '–¢–µ—Å—Ç–æ–≤–∏–π–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á',
                    timestamp: new Date().toISOString(),
                    type: 'private',
                    chatId: chatId1
                }
            ];

            const privateMessages2 = [
                {
                    id: (Date.now() + 2).toString(),
                    text: '–©–æ –Ω–æ–≤–æ–≥–æ?',
                    userId: 'user-2',
                    username: '–ë–æ–≥–¥–∞–Ω',
                    timestamp: new Date().toISOString(),
                    type: 'private',
                    chatId: chatId2
                }
            ];

            localStorage.setItem(`privateMessages_${chatId1}`, JSON.stringify(privateMessages1));
            localStorage.setItem(`privateMessages_${chatId2}`, JSON.stringify(privateMessages2));

            document.getElementById('privateStatus').innerHTML = 
                '<div class="success">‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–∏–≤–∞—Ç–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è</div>';
        }

        function checkPrivateMessages() {
            const keys = Object.keys(localStorage);
            const privateKeys = keys.filter(key => key.startsWith('privateMessages_'));
            
            let status = '<div class="info">';
            status += '<strong>–ü—Ä–∏–≤–∞—Ç–Ω—ñ —á–∞—Ç–∏:</strong> ' + privateKeys.length + '<br>';
            privateKeys.forEach(key => {
                const messages = JSON.parse(localStorage.getItem(key));
                status += '‚Ä¢ ' + key + ': ' + messages.length + ' –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å<br>';
            });
            status += '</div>';
            
            document.getElementById('privateStatus').innerHTML = status;
        }

        function clearAllData() {
            localStorage.clear();
            document.getElementById('clearStatus').innerHTML = 
                '<div class="success">‚úÖ –í—Å—ñ –¥–∞–Ω—ñ –æ—á–∏—â–µ–Ω–æ</div>';
        }

        function resetChat() {
            // Clear only chat-related data
            const keysToRemove = [
                'chatMessages',
                'currentChatId',
                'currentChatType',
                'currentChatUser'
            ];
            
            keysToRemove.forEach(key => {
                localStorage.removeItem(key);
            });
            
            // Clear private messages
            const keys = Object.keys(localStorage);
            keys.forEach(key => {
                if (key.startsWith('privateMessages_')) {
                    localStorage.removeItem(key);
                }
            });
            
            document.getElementById('clearStatus').innerHTML = 
                '<div class="success">‚úÖ –î–∞–Ω—ñ —á–∞—Ç—É –æ—á–∏—â–µ–Ω–æ</div>';
        }

        // Auto-check on load
        window.onload = function() {
            checkUsers();
            checkPrivateMessages();
        };
    </script>
</body>
</html> 